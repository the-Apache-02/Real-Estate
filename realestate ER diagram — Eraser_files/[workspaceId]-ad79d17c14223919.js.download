(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4144],{5087:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/[workspaceId]",function(){return t(44540)}])},13032:function(e,n,t){"use strict";var r=t(52322),i=t(33337),o=t(14898),u=t(17366);n.Z=function(e){var n=e.hideSplashOnLoad,t=void 0===n||n,a=e.children,c=(0,o.fC)();return(0,u.Z)((function(){c&&t&&(0,i.hf)()}),[c,t]),c?(0,r.jsx)(r.Fragment,{children:a}):null}},43258:function(e,n,t){"use strict";var r=t(25237),i=t.n(r),o=t(41219);window.hljs=o.ZP,n.Z=i()((function(){return Promise.all([t.e(9774),t.e(1273),t.e(3484),t.e(4165),t.e(5392),t.e(7219),t.e(5860),t.e(1498),t.e(3134),t.e(6763),t.e(5110),t.e(9489),t.e(3732),t.e(2116),t.e(1023),t.e(1746),t.e(2199),t.e(8191),t.e(5940),t.e(3165),t.e(6243),t.e(427),t.e(3498),t.e(9751),t.e(9689),t.e(1180),t.e(6962),t.e(9821),t.e(3740),t.e(4149)]).then(t.bind(t,87398))}),{loadableGenerated:{webpack:function(){return[87398]}},ssr:!1})},30096:function(e,n,t){"use strict";var r=t(2784),i=t(6673);n.Z=function(){(0,r.useEffect)((function(){return i.Z.init(),function(){return i.Z.dispose()}}),[])}},26138:function(e,n,t){"use strict";var r=t(52322),i=(0,t(2784).memo)((function(){return(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n      body {\n        overflow: hidden;\n      }\n    "}})}));i.displayName="WorkspaceBodyStyles",n.Z=i},29639:function(e,n,t){"use strict";var r=t(52322),i=t(60759),o=t(33337),u=t(41573),a=t(17366);n.Z=function(e){var n=e.hideSplashOnLoad,t=void 0===n||n,c=e.isEmbedIntegration,s=void 0!==c&&c,l=e.children,d=(0,u.Rx)(),f=(0,u.vP)(),v=(0,u.bx)();return(0,a.Z)((function(){d&&t&&(0,o.hf)()}),[d,t]),d?v?f?(0,r.jsx)(r.Fragment,{children:l}):(0,r.jsx)(i.Z,{statusCode:404,hideActionButtons:s}):(0,r.jsx)(i.Z,{statusCode:403,hideActionButtons:s}):null}},90927:function(e,n,t){"use strict";var r=t(52322),i=t(97729),o=t.n(i),u=t(41573);n.Z=function(){var e=(0,u.u0)();return e?(0,r.jsx)(o(),{children:(0,r.jsxs)("title",{children:[e," \u2014 Eraser"]})}):null}},77084:function(e,n,t){"use strict";var r=t(25237),i=t.n(r);n.Z=i()((function(){return t.e(3379).then(t.bind(t,3379))}),{loadableGenerated:{webpack:function(){return[3379]}},ssr:!1})},52449:function(e,n,t){"use strict";t.d(n,{fu:function(){return w},oQ:function(){return y}});var r=t(52322),i=t(2784),o=t(20810),u=t(39739),a=t(9947),c=t(77984),s=t(12335),l=t(14898),d=t(41573),f=t(10890),v=t(5753),p=t(66924),h=t(90396);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],u=!0,a=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(c){a=!0,i=c}finally{try{u||null==t.return||t.return()}finally{if(a)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var n=Date.now(),t=[];return e.forEach((function(e){var r,i=e.id,o=e.heartbeat,u=null!==(r=null===o||void 0===o?void 0:o.toMillis())&&void 0!==r?r:n;n-u<=15e3&&t.push(i)})),t},w=function(e,n){var t=(0,i.useState)([]),r=t[0],l=t[1],d=(0,o.m)((function(e){return e.pipe((0,c.U)((function(e){return b(e,1)[0]})),(0,h.jW)(),(0,s.w)((function(e){return(0,v.Z)(e)})),(0,c.U)(y),(0,h.Mh)(15e3,(function(e,n){return e.length===n.length}),a.z,{leading:!0,trailing:!0}))}),[e]);return(0,u.m)(d,l,p.Tb),(0,i.useMemo)((function(){return n?r.filter((function(e){return e!==n})):r}),[r,n])};n.ZP=function(e){var n=(0,l.II)(),t=(0,i.useState)([]),o=t[0],u=t[1],a=(0,d.mT)(),c=w(a||"");return(0,i.useEffect)((function(){c&&u(c.filter((function(e){return e!==n})))}),[n,c]),(0,r.jsx)(f.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){g(e,n,t[n])}))}return e}({},e,{horizontalAlign:"end",max:3,userIds:o}))}},97184:function(e,n,t){"use strict";t.d(n,{Sh:function(){return x},ZP:function(){return Z}});var r,i=t(52322),o=t(2784),u=t(18149),a=t.n(u),c=t(5632),s=t(6673),l=t(19605),d=t(41573),f=t(65545),v=t(50639),p=t(84173),h=t(10559),m=t(7878),g="layout-sizes",b=[1,1],y=h.X.Document;var w=function(){var e=(0,l.K)(),n=(0,v.d)(),t=(0,c.useRouter)().route,i=(0,o.useState)(0),u=i[0],w=i[1],S=(0,o.useState)(function(e,n,t){var r=e.layout,i=e.element,o=e.elements,u=(0,d.ZP)();return"string"===typeof r&&(0,f.$d)(r)?r:i||o?h.X.Canvas:(null===u||void 0===u?void 0:u.hasFigureEmbed)?h.X.Document:(null===u||void 0===u?void 0:u.hasDrawing)===(null===u||void 0===u?void 0:u.hasNotes)?t?h.X.Canvas:n?y:h.X.Both:(null===u||void 0===u?void 0:u.hasDrawing)?h.X.Canvas:h.X.Document}(e,n,t.endsWith("/embed"))),j=S[0],_=S[1],x=(0,o.useState)((r||(r=m.J.getItem(g)||b),r)),Z=x[0],k=x[1],P=(0,p.Z)(Z),O=(0,p.Z)(j);(0,o.useEffect)((function(){null==j||a()(j,O)||m.J.setItem("layout-mode",j)}),[j,O]),(0,o.useEffect)((function(){null==Z||a()(Z,P)||m.J.setItem(g,Z)}),[Z,P]),(0,o.useEffect)((function(){n&&j===h.X.Both&&_(y)}),[n,j]);var E=(0,o.useMemo)((function(){return function(e){switch(e){case h.X.Canvas:return[!1,!0];case h.X.Document:return[!0,!1];default:return[!0,!0]}}(j)}),[j]);return(0,o.useEffect)((function(){s.Z.emit("layout-ready",_)}),[]),{sizes:Z,visibilities:E,setSizes:k,setLayout:_,offsetTop:u,setOffsetTop:w,layout:j}};function S(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){S(e,n,t[n])}))}return e}var _=(0,o.createContext)(void 0),x=function(e){var n=e.children,t=w(),r=(0,o.useState)(!1),u=r[0],a=r[1],c=(0,o.useState)(!1),s=c[0],l=c[1],d=(0,o.useState)(!1),f=d[0],v=d[1],p=(0,o.useState)(!0),h=p[0],m=p[1],g=(0,o.useState)(!0),b=g[0],y=g[1],S=(0,o.useCallback)((function(){a((function(e){return!e}))}),[]);return(0,i.jsx)(_.Provider,{value:j({},t,{isNotepadReady:s,isWhiteboardReady:f,isWhiteboardEmpty:h,isNotepadEmpty:b,isUiHidden:u,toggleUi:S,setNotepadReady:l,setWhiteboardReady:v,setWhiteboardEmpty:m,setNotepadEmpty:y}),children:n})},Z=_},94234:function(e,n,t){"use strict";t.d(n,{s:function(){return i}});var r=t(19605),i=function(){return"true"===(0,r.K)().embed}},32712:function(e,n,t){"use strict";var r=t(2784),i=t(97184);n.Z=function(){return(0,r.useContext)(i.ZP)}},66610:function(e,n,t){"use strict";t.d(n,{V:function(){return o},Y:function(){return u}});var r=t(21746),i=t(57899),o=function(){return(0,r.Sz)(i.Z,(function(e){return e}))},u=function(){return(0,r.Sz)(i.Z,(function(e){return(null===e||void 0===e?void 0:e.getArray("skip_file_auth_team_ids"))||[]}))}},44540:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return z},createWorkspaceOg:function(){return J},default:function(){return q}});var r=t(52322),i=t(2784),o=t(5632),u=t.n(o),a=t(13032),c=t(60759),s=t(55632),l=t(52449),d=t(32140),f=t(94234),v=t(54599),p=t(32712),h=t(66610),m=t(14898),g=t(49797),b=t(41573),y=t(52251),w=t(68056),S=t(39449),j=t(3559),_=t(53822),x=t(50639),Z=t(5233),k=t(41302),P=t.n(k),O=function(e){var n=e.ownerId,t=(0,g.Z)(null!==n&&void 0!==n?n:"");return t?(0,r.jsxs)("p",{children:["Create a free account to collaborate with ",t.displayName,". By signing up, you agree to our ",(0,r.jsx)("a",{href:"".concat(s.CF.url,"/terms"),children:"terms of service"})]}):null};function E(){var e=new URLSearchParams(window.location.search);return e.set(d.eX,"true"),"".concat(window.location.pathname,"?").concat(e.toString())}var I=function(){var e,n,t=(0,f.s)(),o=(0,x.d)(),a=(0,m.aF)(),c=(0,m.TF)(a),s=(0,h.Y)(),d=(0,b.bm)(),g=d.teamInfo,k=d.workspace,I="integration"===d.environment,C=(0,l.fu)((null===(e=d.workspace)||void 0===e?void 0:e.id)||"",null===a||void 0===a?void 0:a.id),A=(0,p.Z)().setOffsetTop,N=(0,i.useState)(c&&!t&&!o),U=N[0],M=N[1],X=(0,v.ZP)(),L=(null===g||void 0===g?void 0:g.id)&&(s.includes(g.id)||(null===k||void 0===k?void 0:k.isAnonymousAccessAllowed)||(null===k||void 0===k?void 0:k.directAccessMode)===Z.lL.Read),T=g&&!L&&!I&&U;(0,i.useEffect)((function(){A(U?40:0)}),[U,A]),(0,i.useEffect)((function(){var e;T&&c&&(y.Z.trackEvent(null,"page_view",{page_title:"Sign Up",page_location:"".concat(document.location.origin,"/auth/sign-up"),page_path:"/auth/sign-up",embedded_at_path:u().asPath}),X.openSignUpModal({isClosable:!1,customSubTitle:(0,r.jsx)(O,{ownerId:null===(e=d.workspace)||void 0===e?void 0:e.ownerId}),profileArgs:{signUpOrigin:"workspace"},onSignIn:function(e){var n;u().replace(E()),M(!1),X.closeAuthModal(),(null===g||void 0===g?void 0:g.isAutoJoinEnabled)&&(null===e||void 0===e?void 0:e.user)&&(null===(n=e.additionalUserInfo)||void 0===n?void 0:n.isNewUser)&&(0,w.Z)(g.id,null===e||void 0===e?void 0:e.user.uid,{isAutoJoin:!0,origin:"workspace"}).catch((function(){}))}}))}),[T,X.openSignUpModal,X.closeAuthModal,c,g,null===(n=d.workspace)||void 0===n?void 0:n.ownerId]);var B=(0,i.useCallback)((function(){y.Z.trackEvent("auth_banner","sign_up_click",{teamId:null===g||void 0===g?void 0:g.id,teamDomain:null===g||void 0===g?void 0:g.domain,teamAutoJoinEnabled:null===g||void 0===g?void 0:g.isAutoJoinEnabled,activeCollaborarCount:C.length}),y.Z.trackEvent(null,"page_view",{page_title:"Sign Up",page_location:"".concat(document.location.origin,"/auth/sign-up"),page_path:"/auth/sign-up",embedded_at_path:u().asPath}),X.openSignUpModal({isClosable:!0,profileArgs:{signUpOrigin:I?"integration":"workspace"},onSignIn:function(){u().replace(E()),M(!1)}})}),[g,X.openSignUpModal,C,I]);return!U||T?null:(0,r.jsx)("div",{className:P().header,children:(0,r.jsxs)("div",{className:P().wrapper,"data-testid":"auth-banner",children:[(0,r.jsx)("div",{className:P().text,children:"Create multiple files and share everything with your team."}),(0,r.jsx)(j.ZP,{className:P().signIn,onClick:B,children:"Sign Up Free"}),(0,r.jsx)("div",{className:P().close,children:(0,r.jsx)(_.J,{icon:S.Z,onClick:function(){return M(!1)}})})]})})},C=t(43258),A=t(30096),N=t(26138),U=t(29639),M=t(90927),X=t(77084),L=t(97184),T=t(91382),B=t(98523),D=t(68732),F=t(19605),R=t(36171),W=function(e){var n=e.workspaceId,t=(0,F.K)(),r=(0,D.LP)(),o=(0,i.useState)(!1),u=o[0],a=o[1],c=(0,R.X)().request;return(0,i.useEffect)((function(){"duplicate"===t.action&&n&&"string"===typeof n&&r&&!u&&(a(!0),c({workspaceId:n,teamId:r},{reload:!0}))}),[r,c,u,t.action,n]),null},z=!0,J=function(e,n,t){e=e||"Untitled File";var r=t.split("?");return t="".concat(r[0],"/preview").concat(2===r.length?"?":"").concat(r[1]||""),{title:e,description:n||"Create diagrams, wireframes, technical specs with your team. Your all-in-one technical ideation tool.",images:[{url:"".concat(s.l2.url).concat(t),width:1200,height:630,alt:e}]}},q=function(){var e=(0,o.useRouter)(),n=e.query.workspaceId;return(0,A.Z)(),W({workspaceId:n}),e.isReady?"string"!==typeof n?(0,r.jsx)(c.Z,{statusCode:404,title:"File not found"}):(0,r.jsxs)("div",{className:"workspace",children:[(0,r.jsx)(a.Z,{hideSplashOnLoad:!1,children:(0,r.jsx)(T.X,{workspaceId:n,children:(0,r.jsx)(B.Z,{children:(0,r.jsxs)(U.Z,{children:[(0,r.jsx)(M.Z,{}),(0,r.jsx)(X.Z,{}),(0,r.jsxs)(L.Sh,{children:[(0,r.jsx)(I,{}),(0,r.jsx)(C.Z,{})]})]})})})}),(0,r.jsx)(N.Z,{})]}):null}},5753:function(e,n,t){"use strict";var r=t(10732),i=t(99054),o=t(77984),u=t(97442),a=t(3213),c=t(90396);n.Z=function(e){return(0,r.m)(a.Z.workspaceCollaborators(e).withConverter(u.Z),{includeMetadataChanges:!0}).pipe((0,i.h)((function(e){return!e.metadata.fromCache&&!e.metadata.hasPendingWrites})),(0,o.U)((function(e){return e.docs.map((function(e){return e.data()}))})),(0,c.Fb)([]))}},98523:function(e,n,t){"use strict";t.d(n,{K:function(){return b}});var r=t(94776),i=t.n(r),o=t(52322),u=t(2784),a=t(21746),c=t(14360),s=t(68732),l=t(97879),d=t(54167);function f(e,n,t,r,i,o,u){try{var a=e[o](u),c=a.value}catch(s){return void t(s)}a.done?n(c):Promise.resolve(c).then(r,i)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function u(e){f(o,r,i,u,a,"next",e)}function a(e){f(o,r,i,u,a,"throw",e)}u(void 0)}))}}function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){p(e,n,t[n])}))}return e}var m={icons:[],isLoaded:!1},g=(0,a.kr)(m),b=function(){return(0,a.qp)(g)};n.Z=function(e){var n=e.children,t=(0,s.LP)(),r=(0,u.useState)(m.icons),a=r[0],f=r[1],p=(0,u.useState)(m.isLoaded),b=p[0],y=p[1],w=d.g.isFeatureEnabled("customIcons");return(0,u.useEffect)((function(){if(w&&t)return c.Z.subscribeByTeamId(t,function(){var e=v(i().mark((function e(n){var t,r,o,u,a,c,s,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(!b&&n&&y(!0),t=[],r=!0,o=!1,u=void 0,e.prev=3,a=function(e,n){var r=n.value;t.push(new Promise((function(e,n){fetch(r.url).then(function(){var n=v(i().mark((function n(t){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.text();case 2:o=n.sent,l.LD.set(r.label,o),e(h({},r,{rawHTML:o}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(n)})))},c=n[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)a(0,s);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),o=!0,u=e.t0;case 12:e.prev=12,e.prev=13,r||null==c.return||c.return();case 15:if(e.prev=15,!o){e.next=18;break}throw u;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.allSettled(t);case 22:d=e.sent,p=d.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),f(p);case 25:case"end":return e.stop()}}),e,null,[[3,8,12,20],[13,,15,19]])})));return function(n){return e.apply(this,arguments)}}());console.error("[CustomIconsProvider] currentTeamId is not defined")}),[w,b,t]),(0,o.jsx)(g.Provider,{value:{icons:a,isLoaded:b},children:n})}},41302:function(e){e.exports={header:"AuthBanner_header__hgvMD",wrapper:"AuthBanner_wrapper__Cznaq",text:"AuthBanner_text__SBtet",signIn:"AuthBanner_signIn__ugcMl",close:"AuthBanner_close__FmqGy"}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[4155,1219,9774,2888,179],(function(){return n(412),n(5087)}));var t=e.O();_N_E=t}]);